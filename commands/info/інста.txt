const Discord = require('discord.js'); 
const axios = require('axios')
const { ErrorBuilder } = require('../../handlers/errorBuilder.js')
const toJSON = require('website-to-json')

module.exports = {
    desc:"–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤–∫–∞–∑–∞–Ω–∏–π –≤–∞–º–∏ Instagram –∞–∫–∫–∞—É–Ω—Ç.",
    run: async (client, message, args) => {
      const name = args.join(" ");
      console.log(name)
      if (!name) return ErrorBuilder(message,'–≤—ñ–¥–ø–æ–≤—ñ–¥—å',null,'–í–∫–∞–∂—ñ—Ç—å –Ω—ñ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞!')
      const url = `https://instagram.com/${name}`; 
     
      let res;
     
      toJSON.extractData(url, {
        fields: ['data'],
        parse: function($) {

        }
      })
  //  } catch (e) {
  //      return ErrorBuilder(message,"–≤—ñ–¥–ø–æ–≤—ñ–¥—å",null,"–ê–∫–∞—É–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.")
 //   }

    const embed = new Discord.EmbedBuilder()
    .setColor("Green")
    .setTitle(account.full_name)
    .setURL(`https://instagram.com/${name}`)
    .setThumbnail(account.profile_pic_url_hd)
    .addFields(
      {name:"**–ù—ñ–∫–Ω–µ–π–º:**",value:`${account.username}`},
      {name:"**–Ü–º'—è:**",value:`${account.full_name}`},
      {name:`**–ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è:**`,value:`${account.biography.length == 0 ? "–í—ñ–¥—Å—É—Ç–Ω–Ω—è" : account.biography}`}
    )
    .addFields(
      {name:`**–ü—É–±–ª—ñ–∫–∞—Ü—ñ—ó:**`,value:`${account.edge_owner_to_timeline_media.count}`},
      {name:`**–ß–∏—Ç–∞—á—ñ:**`,value:`${account.edge_followed_by.count}`},
      {name:`**–°–ª—ñ–¥–∫—É–≤–∞–Ω–Ω—è:**`,value:`${account.edge_follow.count}`}
    )
    .addFields(
      {name:"**–ü—Ä–∏–≤–∞—Ç–Ω—ñ—Å—Ç—å**",value:`${account.is_private ? "üîê" : "üîì"}`}
    )
   .setFooter({text:`–ó–∞–¥–∞–≤ ${message.author.tag}`,iconURL:message.author.displayAvatarURL({dynamic: true})})
    await message.reply({embeds:[embed]})
   
    
  

    }
}